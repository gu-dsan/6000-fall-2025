<!DOCTYPE html>
<html lang="en"><head>
<link href="..//files/img/ppol5206-logo.png" rel="icon" type="image/png">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Amit Arora">
  <title>PPOL 5206 - Lecture 4</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #cbccc6; background-color: #1f2430; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #cbccc6; } /* Normal */
    code span.al { color: #ff3333; background-color: #332430; font-weight: bold; } /* Alert */
    code span.an { color: #ffe6b3; } /* Annotation */
    code span.at { color: #73d0ff; } /* Attribute */
    code span.bn { color: #ffcc66; } /* BaseN */
    code span.bu { color: #95e6cb; } /* BuiltIn */
    code span.cf { color: #ffa759; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #95e6cb; } /* Char */
    code span.cn { color: #d4bfff; } /* Constant */
    code span.co { color: #5c6773; font-style: italic; } /* Comment */
    code span.cv { color: #d4bfff; } /* CommentVar */
    code span.do { color: #5c6773; } /* Documentation */
    code span.dt { color: #ffa759; } /* DataType */
    code span.dv { color: #ffcc66; } /* DecVal */
    code span.er { color: #ff3333; text-decoration: underline; } /* Error */
    code span.ex { color: #73d0ff; font-weight: bold; } /* Extension */
    code span.fl { color: #ffcc66; } /* Float */
    code span.fu { color: #ffd580; } /* Function */
    code span.im { color: #bae67e; } /* Import */
    code span.in { color: #ffcc66; } /* Information */
    code span.kw { color: #ffa759; font-weight: bold; } /* Keyword */
    code span.op { color: #f29e74; } /* Operator */
    code span.ot { color: #5ccfe6; } /* Other */
    code span.pp { color: #f28779; } /* Preprocessor */
    code span.re { color: #73d0ff; background-color: #2a4254; } /* RegionMarker */
    code span.sc { color: #95e6cb; } /* SpecialChar */
    code span.ss { color: #95e6cb; } /* SpecialString */
    code span.st { color: #bae67e; } /* String */
    code span.va { color: #5ccfe6; } /* Variable */
    code span.vs { color: #bae67e; } /* VerbatimString */
    code span.wa { color: #f28779; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-N2B9K684GE"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-N2B9K684GE', { 'anonymize_ip': true});
  </script>
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="PPOL 5206 - Lecture 4">
<<<<<<< HEAD
<meta property="og:description" content="Containers &amp; Lambda">
=======
<meta property="og:description" content="MapReduce, Hadoop, and Hadoop Streaming">
>>>>>>> 5cfd7cc16e257c0a05ca9589ee545fcbfa2d7d0d
<meta property="og:image" content="https://aa1603.georgetown.edu/ppol5206/files/img/ppol5206-logo.png">
<meta property="og:site-name" content="PPOL 5206">
<meta property="og:locale" content="en_US">
<meta property="og:image:height" content="600">
<meta property="og:image:width" content="518">
<meta name="twitter:title" content="PPOL 5206 - Lecture 4">
<<<<<<< HEAD
<meta name="twitter:description" content="Containers &amp; Lambda">
=======
<meta name="twitter:description" content="MapReduce, Hadoop, and Hadoop Streaming">
>>>>>>> 5cfd7cc16e257c0a05ca9589ee545fcbfa2d7d0d
<meta name="twitter:image" content="https://aa1603.georgetown.edu/ppol5206/files/img/ppol5206-logo.png">
<meta name="twitter:creator" content="@aarora79">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="600">
<meta name="twitter:image-width" content="518">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 4</h1>
<<<<<<< HEAD
  <p class="subtitle">Containers &amp; Lambda</p>
=======
  <p class="subtitle">MapReduce, Hadoop, and Hadoop Streaming</p>
>>>>>>> 5cfd7cc16e257c0a05ca9589ee545fcbfa2d7d0d

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Amit Arora 
</div>
        <p class="quarto-title-affiliation">
            Georgetown University
          </p>
        <p class="quarto-title-affiliation">
            Spring 2024
          </p>
    </div>
</div>

</section>
<<<<<<< HEAD
<section id="agenda-and-goals-for-today" class="slide level2">
<h2>Agenda and Goals for Today</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="lecture">Lecture</h3>
<ul>
<li>Docker containers
<ul>
<li>Background and concepts</li>
<li>Syntax and commands</li>
<li>Examples</li>
</ul></li>
<li>Lambda/microservices
<ul>
<li>Background and concepts</li>
<li>Syntax and commands</li>
<li>Examples</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="lab">Lab</h3>
<ul>
<li>Lambda service exploration</li>
<li>Cloud9 Setup</li>
<li>Docker Container exploration in Cloud9</li>
</ul>
</div>
</div>
</section>
<section id="logistics-and-review" class="slide level2">
<h2>Logistics and Review</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="deadlines">Deadlines</h3>
<ul>
<li><del>Assignment 1: Python Skills <strong>Due Sept 5 11:59pm</strong></del></li>
<li><del>Lab 2: Cloud Tooling <strong>Due Sept 5 6pm</strong></del></li>
<li><del>Assignment 2: Shell &amp; Linux <strong>Due Sept 11 11:59pm</strong></del></li>
<li><del>Lab 3: Parallel Computing <strong>Due Sept 12 6pm</strong></del></li>
<li>Assignment 3: Parallelization <strong>Due Sept 18 11:59pm</strong></li>
<li>Lab 4: Docker and Lambda <strong>Due Sept 19 6pm</strong></li>
<li>Assignment 4: Containers <strong>Due Sept 25 11:59pm</strong></li>
<li>Lab 5: DuckDB &amp; Polars <strong>Due Sept 26 6pm</strong></li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="look-back-and-ahead">Look back and ahead</h3>
<ul>
<li>Continue to use Slack for questions!</li>
<li>Parallelization in Python</li>
<li>Concepts of <code>map</code> and <code>reduce</code></li>
<li>Choosing when to re-factor/optimize code for scalability</li>
<li><strong>Questions on Assignment 3: Parallelization?</strong></li>
</ul>
</div>
</div>
</section>
<section>
<section id="containers" class="title-slide slide level1 center">
<h1>Containers</h1>

</section>
<section id="process-isolation-and-deployment" class="slide level2">
<h2>Process Isolation and Deployment</h2>
<ul>
<li>Encapsulate all the dependencies of your code</li>
<li>Deploy your code into production in the same environment as your development space</li>
<li>Run your code without other processes affecting your work</li>
<li>You need virtualization!</li>
</ul>
</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<h3 id="why-should-you-care">Why should you care?</h3>

<img data-src="img/meme_ship_machine.png" class="r-stretch"></section>
<section id="history-of-virtualization" class="slide level2">
<h2>History of Virtualization</h2>
<ul>
<li>Two types of virtualization - hardware and software</li>
<li>Hardware time sharing started in the late 1950s</li>
<li>Virtualization first introduced in IBM in the 1960s</li>
<li>VMWare started in</li>
</ul>

<img data-src="img/virtualization-timeline.png" class="r-stretch"><p><a href="https://www.servethehome.com/virtualization-long-history/">link</a></p>
</section>
<section id="virtual-machines" class="slide level2">
<h2>Virtual Machines</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Hardware server is the host</li>
<li>Multiple virtual machines can sit on the hypervisor as “guests”</li>
<li>Pros: decades of development in VMs, multiple emulated full computers on single hardware, allows for infrastructure “lift and shift” to the cloud</li>
<li>Cons: VM images very large (10-100s GBs), “guest” OS takes up resources, large start up cost</li>
</ul>
<p><a href="https://www.vmware.com/topics/glossary/content/vms-vs-containers.html">link</a></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/vm-diagram.png"></p>
</div>
</div>
</section>
<section id="containers-1" class="slide level2">
<h2>Containers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Package and run applications in isolated environment</li>
<li>Great for production work, not as much for developmental work</li>
<li>Docker application manages “guest” applications with a single operating system</li>
<li>Pros: Lightweight (10-100s MBs), faster spin up time, one host can manage many more containers</li>
<li>Cons: containers must all work with the same OS, somewhat less secure due to shared OS resources, only 10 years old</li>
</ul>
<p><a href="https://www.vmware.com/topics/glossary/content/vms-vs-containers.html">link</a></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/container-diagram.png"></p>
</div>
</div>
</section>
<section id="docker-vs.-virtual-machine" class="slide level2">
<h2>Docker vs.&nbsp;Virtual Machine</h2>

<img data-src="img/vm-vs-container.PNG" class="r-stretch"></section>
<section id="docker-container-architecture" class="slide level2">
<h2>Docker Container Architecture</h2>
<ul>
<li>Images are a snapshot of instructions for setup of an application environment</li>
<li>Containers are executing applications deployed based on an image</li>
<li>Container images become containers at runtime (Docker Engine!)</li>
</ul>

<img data-src="img/Docker-Architecture.png" class="r-stretch"></section>
<section id="containers-are-not-enough" class="slide level2">
<h2>Containers are not enough</h2>

<img data-src="img/containers-dont-solve-everything.jpg" class="r-stretch"></section>
<section id="container-lifecycle" class="slide level2">
<h2>Container lifecycle</h2>
<ul>
<li>Containers (like applications) need a lifecycle</li>
</ul>

<img data-src="img/container-lifecycle.png" class="r-stretch"></section>
<section id="container-orchestration" class="slide level2">
<h2>Container orchestration</h2>

<img data-src="img/container-orchestration.jpg" class="r-stretch"></section></section>
<section>
<section id="building-docker-images" class="title-slide slide level1 center">
<h1>Building Docker images</h1>

</section>
<section id="docker-layers" class="slide level2">
<h2>Docker layers</h2>
<p>Each command to modify the environment is a layer in your build process</p>

<img data-src="img/docker-layers.png" class="r-stretch"></section>
<section id="docker-base-images" class="slide level2">
<h2>Docker base images</h2>
<ul>
<li>The first command in a Docker build is to call <code>FROM XXXXX</code>. This is the base image that has the core OS-level software.</li>
<li>smaller size == faster execution</li>
</ul>

<img data-src="img/docker-base-images.png" class="r-stretch"></section>
<section id="the-storage-problem-of-containers" class="slide level2">
<h2>The storage problem of containers</h2>
<ul>
<li>When containers are killed, all temporary is lost! What to do…</li>
<li>Containers need persistent storage sometimes</li>
<li>Docker volumes live outside the container and allow for permanent storage</li>
</ul>

<img data-src="img/docker-volumes.png" class="r-stretch"></section>
<section id="dockerfile-syntax" class="slide level2">
<h2>Dockerfile Syntax</h2>
<p><strong>Students explain what each command is doing</strong></p>
<ul>
<li>Format is always <code>INSTRUCTION arguments</code></li>
<li><code>FROM [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</code> - Pulling the base image to start with</li>
<li><code>RUN &lt;command&gt;</code> or <code>RUN ["executable", "param1", "param2"]</code> - Run commands of any type</li>
<li><code>VOLUME</code> - Creates mountpoint for Docker volume</li>
<li><code>ENV &lt;key&gt;=&lt;value&gt; ...</code> - Set environment variables for your container</li>
<li><code>WORKDIR</code> - Sets working directory for other commands</li>
<li><code>EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</code> - Open a port for the container</li>
<li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] [--chmod=&lt;perms&gt;] &lt;src&gt;... &lt;dest&gt;</code> - Copies files from host file system to container file system. Note working directory matters in the container too!</li>
<li><code>ADD</code> - Copy with a link to allow for reusing of already built layers. Helps with build speed!</li>
</ul>
</section>
<section id="dockerfile-cmd-and-entrypoint" class="slide level2">
<h2>Dockerfile CMD and ENTRYPOINT</h2>
<ul>
<li>Should have a purpose for your container and have it run something!</li>
<li><code>CMD command param1 param2</code> - Final command to prepare the launching container. Typically occurs before an <code>ENTRYPOINT</code> instruction or as its own standalone command. <code>CMD</code> can be overwritten by new <code>docker run</code> arguments.</li>
<li><code>ENTRYPOINT command param1 param2</code> - Command that will run the Docker container as an executable, such as a web server, Jupter environment, or data pipeline.</li>
</ul>

<img data-src="img/docker-cmd-entrypoint.png" class="r-stretch"></section>
<section id="dockerfile-syntax-examples" class="slide level2">
<h2>Dockerfile Syntax Examples</h2>
<ul>
<li><code>RUN ["/bin/bash", "-c", "echo hello"]</code></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a href="#cb1-1"></a>FROM busybox</span>
<span id="cb1-2"><a href="#cb1-2"></a>ENV FOO=/bar</span>
<span id="cb1-3"><a href="#cb1-3"></a>WORKDIR ${FOO}   # WORKDIR /bar</span>
<span id="cb1-4"><a href="#cb1-4"></a>ADD . $FOO       # ADD . /bar</span>
<span id="cb1-5"><a href="#cb1-5"></a>COPY \$FOO /quux # COPY $FOO /quu</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb2-1"><a href="#cb2-1"></a># syntax=docker/dockerfile:1</span>
<span id="cb2-2"><a href="#cb2-2"></a>FROM python:3.6</span>
<span id="cb2-3"><a href="#cb2-3"></a>ADD mypackage.tgz wheels/</span>
<span id="cb2-4"><a href="#cb2-4"></a>RUN --network=none pip install --find-links wheels mypackage</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="https://docs.docker.com/engine/reference/builder/">Dockerfile reference link</a></p>
</section>
<section id="s3-example" class="slide level2">
<h2>S3 example</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb3-1"><a href="#cb3-1"></a># syntax=docker/dockerfile:1</span>
<span id="cb3-2"><a href="#cb3-2"></a>FROM python:3</span>
<span id="cb3-3"><a href="#cb3-3"></a>RUN pip install awscli</span>
<span id="cb3-4"><a href="#cb3-4"></a>RUN --mount=type=secret,id=aws,target=/root/.aws/credentials aws s3 cp s3://... ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="web-server-example" class="slide level2">
<h2>Web server example</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb4-1"><a href="#cb4-1"></a>FROM debian:stable</span>
<span id="cb4-2"><a href="#cb4-2"></a>RUN apt-get update &amp;&amp; apt-get install -y --force-yes apache2</span>
<span id="cb4-3"><a href="#cb4-3"></a>EXPOSE 80 443</span>
<span id="cb4-4"><a href="#cb4-4"></a>VOLUME ["/var/www", "/var/log/apache2", "/etc/apache2"]</span>
<span id="cb4-5"><a href="#cb4-5"></a>ENTRYPOINT ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="docker-for-python-jobs" class="slide level2">
<h2>Docker for Python jobs</h2>
<p>Basic needs:</p>
<ul>
<li>Dockerfile that sets up environment</li>
<li>Application code to execute</li>
<li>List of packages to install</li>
</ul>
<p><a href="https://docs.docker.com/language/python/build-images/">Walkthrough</a></p>
</section>
<section id="docker-python-example" class="slide level2">
<h2>Docker Python example</h2>
<ol type="1">
<li>Write your Dockerfile</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">FROM</span> python:3.8-slim-buster</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="ex">WORKDIR</span> /app</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="ex">COPY</span> requirements.txt requirements.txt</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="ex">RUN</span> pip3 install <span class="at">-r</span> requirements.txt</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="ex">COPY</span> . .</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="ex">CMD</span> [ <span class="st">"python3"</span>, <span class="st">"-m"</span> , <span class="st">"flask"</span>, <span class="st">"run"</span>, <span class="st">"--host=0.0.0.0"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><p>Build the docker image using a tag and version number <code>docker build ./ -t docker-tag-name:1.0</code>. Read about docker building options <a href="https://docs.docker.com/engine/reference/commandline/build/">here</a>.</p></li>
<li><p>Check your docker images in your local file system using <code>docker images</code></p></li>
<li><p>Test your docker image using <code>docker run -it docker-tag-name</code>. Read about the flags <a href="https://docs.docker.com/engine/reference/run/">here</a>. The <code>i</code> is to keep STDIN open, the <code>t</code> is for pseudo-TTY mode (shell).</p></li>
<li><p>Deploy your docker image somewhere!</p></li>
</ol>
</section>
<section id="docker-links" class="slide level2">
<h2>Docker links</h2>
<p><a href="https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-spark-docker.html">AWS examples</a></p>
<p><a href="https://pythonspeed.com/articles/base-image-python-docker-images/">Article discussing performance considerations</a></p>
<p><a href="https://www.docker.com/resources/what-container/">What are containers?</a></p>
</section></section>
<section>
<section id="lambda" class="title-slide slide level1 center">
<h1>Lambda</h1>

</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<ul>
<li><p>Lambda (or <span class="math inline">\(\lambda\)</span>) is the name given to anonymous functions in some languages like Python.</p></li>
<li><p>Lambda is a powerful tool to build serverless microfunctions in a variety of programming languages that can be triggered in a variety of ways.</p></li>
<li><p>The execution of a Lambda can scale to meet the burst needs of users going to a website, or the number of rows of incoming data.</p></li>
<li><p>There can be thousands of executions happening simultaneously.</p></li>
<li><p>Lambda is billed by the millisecond (ms).</p></li>
</ul>

<aside><div>
<p>The name Lambda is derived from Lambda calculus, a mathematical system to express computation introduced by Dr.&nbsp;Alonzo Church in the 1930s. See wikipedia entry on <a href="https://en.wikipedia.org/wiki/Lambda_calculus">Lambda calculus</a> for why the symbol <span class="math inline">\(\lambda\)</span> was choosen.</p>
</div></aside></section></section>
<section>
<section id="aws-lambda-functions" class="title-slide slide level1 center">
<h1>AWS Lambda Functions</h1>

</section>
<section id="lambda-details" class="slide level2">
<h2>Lambda Details</h2>

<img data-src="img/lambda-example.png" class="r-stretch"><ul>
<li>Micro executions without dealing with any hardware, “serverless” computation.</li>
<li>Can run many copies of code depending on number of requests or files.</li>
<li>Supported languages: Java, Go, PowerShell, Node.js, C#, Python, and Ruby.
<ul>
<li>Provides a Runtime API which allows you to use any additional programming languages to author your functions</li>
</ul></li>
<li>Pricing based on RAM and time used - <a href="https://aws.amazon.com/lambda/pricing/">Lambda pricing</a>
<ul>
<li>Max execution time - 15 minutes</li>
<li>Max RAM - 10 GB</li>
</ul></li>
</ul>
</section>
<section id="lambda-triggers" class="slide level2">
<h2>Lambda triggers</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Lambdas only start executing in response to an <strong>event</strong>, such as an API being invoked, a schedule or more complex things.</p></li>
<li><p>A Lambda function is used primarily in the following two ways:</p>
<ul>
<li>Hosting an API, this is done in conjunction with an <a href="https://aws.amazon.com/api-gateway/">Amazon API Gateway</a>.</li>
<li>Running custom code to respond to events such as a new file showing up in an S3 bucket, a row being deleted from a database etc.</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/lambda-triggers.gif"></p>
<p></p><figcaption><a href="img/lambda-triggers.gif"><code>Lambda triggers</code></a></figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="different-ways-to-invoke-lambda" class="slide level2">
<h2>Different ways to invoke Lambda</h2>
<p><img data-src="https://d2908q01vomqb2.cloudfront.net/fc074d501302eb2b93e2554793fcaf50b3bf7291/2019/06/27/Screen-Shot-2019-06-27-at-2.23.51-PM-1024x510.png" alt="Ways to invoke Lambda"> Source: <a href="https://aws.amazon.com/blogs/architecture/understanding-the-different-ways-to-invoke-lambda-functions/">Understanding the different ways to invoke Lambda function</a></p>
</section>
<section id="some-real-world-use-cases-for-a-lambda" class="slide level2">
<h2>Some real world use-cases for a Lambda</h2>
<ol type="1">
<li><p>Transforming a picture taken by a delivery agent into a desired format and storing it in S3 in real-time.</p></li>
<li><p>As a front-end (along with an API Gateway) to a ML model to provide real-time prediction to a customer clicking a link on a website .</p></li>
<li><p>A backend API that gets invoked when a QR code is scanned.</p></li>
<li><p>A simple single page website with a form.</p></li>
<li><p>Sending a scheduled newsletter to email addresses on a mailing list.</p></li>
</ol>
<p><a href="https://aws.amazon.com/lambda/resources/customer-case-studies/">AWS Lambda customer case studies</a></p>
</section>
<section id="lambda-can-be-set-on-a-schedule" class="slide level2">
<h2>Lambda can be set on a schedule</h2>
<ul>
<li>Similar to Linux Crontab or Windows Task Scheduler</li>
</ul>
<p><a href="https://docs.aws.amazon.com/lambda/latest/dg/services-cloudwatchevents-expressions.html">example of schedule trigger</a></p>
<ul>
<li>Site for translating crontab symbols to next execution: https://crontab.guru/</li>
<li>Site for generating crontab syntax from dropdown options: https://crontab-generator.org/</li>
</ul>
</section>
<section id="lambda-coding-choices" class="slide level2">
<h2>Lambda coding choices</h2>
<p>Levels of Lambda complexity:</p>
<ol type="1">
<li>Code written directly on the AWS Lambda console</li>
<li>Zip archive</li>
<li>Docker Containers</li>
</ol>
</section>
<section id="lambda-basic-code-demo" class="slide level2">
<h2>Lambda basic code demo</h2>
<ol type="1">
<li><p>Beyond any simple prototyping, you would probably never use this method.</p></li>
<li><p>The “hello world” example and then numbers with an endpoint</p>
<ul>
<li><a href="https://frankcorso.dev/aws-lambda-function-endpoint-api-gateway.html" class="uri">https://frankcorso.dev/aws-lambda-function-endpoint-api-gateway.html</a></li>
</ul></li>
</ol>
</section>
<section id="using-a-zip-archive-for-lambda" class="slide level2">
<h2>Using a Zip archive for Lambda</h2>
<ol type="1">
<li><p>The Lambda code (say the <code>index.py</code> file) and all the dependencies i.e.&nbsp;Python packages used by the code are packaged together in a Zip file, typically called <code>function.zip</code>.</p>
<ul>
<li>Be careful to always install these packages in a special directory specifically created for the Lambda function so to not override anything currently installed in your existing Python installation.</li>
</ul></li>
<li><p>The <code>function.zip</code> file is put in an S3 bucket and the Lambda is configured to pull it from there.</p></li>
<li><p>Example <a href="https://github.com/aws-samples/llm-apps-workshop/blob/main/blogs/rag/api/deploy.sh">script</a> for building a Lambda <code>function.zip</code> and uploading it to S3.</p></li>
</ol>
<p><a href="https://docs.aws.amazon.com/lambda/latest/dg/python-package.html">AWS example of zip archive</a></p>
</section>
<section id="lambda-with-docker-containers" class="slide level2">
<h2>Lambda with Docker containers</h2>
<p><a href="https://docs.aws.amazon.com/lambda/latest/dg/python-image.html#python-image-base">AWS example</a> <a href="https://www.philschmid.de/aws-lambda-with-custom-docker-image">Walkthrough post</a></p>
</section>
<section id="dockerfile" class="slide level2">
<h2>Dockerfile</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb6-1"><a href="#cb6-1"></a># syntax=docker/dockerfile:1</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a># adapted from https://www.philschmid.de/aws-lambda-with-custom-docker-image</span>
<span id="cb6-4"><a href="#cb6-4"></a># https://docs.aws.amazon.com/lambda/latest/dg/python-image.html</span>
<span id="cb6-5"><a href="#cb6-5"></a>FROM public.ecr.aws/lambda/python:3.9</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a># copy requirements file and install necessary packages</span>
<span id="cb6-8"><a href="#cb6-8"></a>ADD requirements.txt ${LAMBDA_TASK_ROOT}</span>
<span id="cb6-9"><a href="#cb6-9"></a>RUN pip3 install -r ${LAMBDA_TASK_ROOT}/requirements.txt --target "${LAMBDA_TASK_ROOT}"</span>
<span id="cb6-10"><a href="#cb6-10"></a></span>
<span id="cb6-11"><a href="#cb6-11"></a># Copy function code to docker container</span>
<span id="cb6-12"><a href="#cb6-12"></a>COPY app.py ${LAMBDA_TASK_ROOT}</span>
<span id="cb6-13"><a href="#cb6-13"></a></span>
<span id="cb6-14"><a href="#cb6-14"></a># app (name of py file)</span>
<span id="cb6-15"><a href="#cb6-15"></a># handler (name of function to execute for lambda job)</span>
<span id="cb6-16"><a href="#cb6-16"></a>CMD [ "app.lambda_handler" ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="interactivity-with-lambda" class="slide level2">
<h2>Interactivity with Lambda?</h2>
<p><a href="https://www.keithrozario.com/2019/08/interactive-shell-on-a-lambda-function.html">If you “hack” it!</a></p>
</section>
<section id="connecting-multiple-lambdas-together" class="slide level2">
<h2>Connecting multiple Lambdas together</h2>
<p><a href="https://medium.com/zenofai/create-an-etl-solution-using-aws-step-functions-lambda-and-glue-302623bc2fea">Connecting multiple lambda using AWS Step Functions</a></p>
</section>
<section id="performance-optimization" class="slide level2">
<h2>Performance optimization</h2>
<h4 id="warm-start-vs-cold-start">warm start vs cold start</h4>
<p><a href="https://aws.amazon.com/blogs/compute/operating-lambda-performance-optimization-part-1/">Discussion post on AWS</a></p>
</section>
<section id="extra-links" class="slide level2">
<h2>Extra links</h2>
<p><a href="https://www.tatvasoft.com/blog/aws-lambda-vs-azure-functions/" class="uri">https://www.tatvasoft.com/blog/aws-lambda-vs-azure-functions/</a></p>
<p>serverless web scraper with python and lambda - up to date simple example <a href="https://towardsdatascience.com/serverless-covid-19-data-scraper-with-python-and-aws-lambda-d6789a551b78" class="uri">https://towardsdatascience.com/serverless-covid-19-data-scraper-with-python-and-aws-lambda-d6789a551b78</a></p>
=======
<section id="section" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<h3 id="looking-back">Looking back</h3>
<ul>
<li><p>Linux and version control</p></li>
<li><p>Python and parallelization</p></li>
<li><p>Intro to the Cloud</p></li>
<li><p>Setup of AWS Services</p></li>
</ul>
</div>
<div class="column" style="width:47%;">
<h3 id="today">Today</h3>
<ul>
<li><p>Intro to Hadoop and MapReduce</p></li>
<li><p>Hadoop Streaming</p></li>
<li><p>Lab/Demo (depending on time):</p>
<ul>
<li>Start a cluster on AWS</li>
<li>Run a sample Hadoop job</li>
<li>Run a simluated mapreduce job using the command line</li>
<li>Run a Hadoop Streaming job</li>
</ul></li>
</ul>
</div>
</section>
<section id="yesterdays-hardware-for-big-data-processing" class="slide level2">
<h2>Yesterday’s hardware for big data processing</h2>
<div class="column" style="width:47%;">
<h3 id="the-1990s-solution">The 1990’s solution</h3>
<p><strong>One big box, all processors share memory</strong></p>
<p>This was:</p>
<ul>
<li>Very expensive</li>
<li>Low volume</li>
</ul>
<p>It was all <em>premium</em> hardware. <strong>And yet is still was not big enough!</strong></p>
</div>
<div class="column" style="width:10%;">

</div>
<div class="column" style="width:37%;">
<p><img src="img/yesterdays-hardware.jpg" width="350"></p>
</div>
</section>
<section id="enter-commodity-hardware" class="slide level2">
<h2>Enter commodity hardware!</h2>
<div class="column" style="width:47%;">
<h3 id="consumer-grade-hardware">Consumer-grade hardware</h3>
<p>Not expensive, premium nor fancy in any way</p>
<p><strong>Desktop-like servers are cheap, so buy a lot!</strong></p>
<ul>
<li>Easy to add capacity</li>
<li>Cheaper per CPU/disk</li>
</ul>
<h3 id="but">But</h3>
<p>Need more complex software to be able to run on lots of smaller/cheaper machines.</p>
</div>
<div class="column" style="width:47%;">
<p><img src="img/hardware-big-data.jpg" width="350"></p>
</div>
</section>
<section id="problems-with-cheap-hardware" class="slide level2">
<h2>Problems with cheap hardware</h2>
<div class="column" style="width:47%;">
<h3 id="failures">Failures</h3>
<ul>
<li>1-5% hard drives/year</li>
<li>0.2% DIMMs/year</li>
</ul>
<h3 id="network-speed-vs.-shared-memory">Network speed vs.&nbsp;shared memory</h3>
<ul>
<li>Much more latency</li>
<li>Network slower than storage</li>
</ul>
<h3 id="uneven-performance">Uneven performance</h3>
</div>
<div class="column" style="width:47%;">
<p><img src="img/cheap-hw.jpg"></p>
</div>
</section>
<section>
<section id="big-data-processing-systems-build-on-average-machines-which-fail-pretty-often" class="title-slide slide level1 section center">
<h1>Big data processing systems build on average machines which fail pretty often!</h1>

</section>
<section id="hang-on-to-this-thought" class="slide level2">
<h2>Hang on to this thought!</h2>
</section>
<section id="meet-doug-cutting" class="slide level2">
<h2>Meet <a href="https://en.wikipedia.org/wiki/Doug_Cutting">Doug Cutting</a></h2>
<div class="column" style="width:47%;">
<p><img src="img/doug-cutting.jpeg" width="350"></p>
</div>
<div class="column" style="width:47%;">
<ul>
<li>In 1997, Doug Cutting started writing the first version of <a href="https://lucene.apache.org/">Lucene</a> (a full text search library).</li>
<li>In 2001, Lucene moves to the <a href="https://apache.org/">Apache Software Foundation</a>, and <a href="https://en.wikipedia.org/wiki/Mike_Cafarella">Mike Cafarella</a> joins Doug and create a Lucene subproject called <a href="http://nutch.apache.org/">Nutch</a>, a web-crawler. Nutch uses Lucene to index the contents of a web page as it crawls it.</li>
<li>Nutch and Lucene were deployed on a <strong>single machine</strong> (single core processor, 1GB RAM, 8 HDDs ~ 1TB), achieved decent performance, but they needed something that would be scalable enough to be able to index the web.</li>
</ul>
</div>
</section>
<section id="doug-and-mike-set-out-to-to-improve-nutch" class="slide level2">
<h2>Doug and Mike set out to to improve Nutch</h2>
<p>They needed a to build some kind of distributed storage layer to be the foundation of a scalable system. The came up with these requirements:</p>
<ul>
<li>Schemaless</li>
<li>Durable</li>
<li>Capable of handling component failure</li>
<li>Automatically rebalanced</li>
</ul>
<div class="fragment">
<p><strong>Does this sound familiar?</strong></p>
</div>
</section></section>
<section>
<section id="in-2003-and-2004-google-publishes-two-seminal-papers" class="title-slide slide level1 section center">
<h1>In 2003 and 2004 Google publishes two seminal papers</h1>

</section>
<section id="section-1" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<p><img src="img/gfs-paper.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="the-google-file-system-gfs-paper">The Google File System (GFS) Paper</h3>
<p>It describes how Google stored its information, at scale, using a reliable and high-available storage system can be built on commodity machines considering that failures are the norm rather than the exception.</p>
<p>GFS is: * optimized for special application environment * fault tolerance is built in * centralized metadata management * simplify the operation semantics * decouple I/O and metadata operations</p>
</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<p><img src="img/mr-paper.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="the-google-mapreduce-paper">The Google MapReduce Paper</h3>
<p>Describes how Google processes data, at scale using MapReduce, a paradigm based on functional programming. MapReduce is an approach and infrastructure for doing things at scale. MapReduce is two things:</p>
<ol type="1">
<li>A data processing model named MapReduce</li>
<li>A distributed, large scale data processing paradigm.</li>
</ol>
<p>Which provides the following benefits:</p>
<ul>
<li>Moves the computation to the data</li>
<li>Automatic parallelization and distribution</li>
<li>Fault tolerance</li>
<li>I/O scheduling</li>
<li>Integrated status and monitoring</li>
</ul>
</div>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<p><img src="img/mr-paper.png"></p>
</div>
<div class="column" style="width:47%;">
<p><strong>The MapReduce model</strong></p>
<ol type="1">
<li>Map function takes an input pair and produces a set of intermediate key/value pairs. The MapReduce library groups together all intermediate values associated with the same intermediate key and passes them to the Reduce function.</li>
<li>Reduce function accepts an intermediate key and a set of values for that key. It merges together these values to form a possibly smaller set of values. Typically just zero or one output value is produced per Reduce invocation.</li>
</ol>
</div>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<p><img src="img/mr-paper.png"></p>
</div>
<div class="column" style="width:47%;">
<p><strong>The advantages</strong></p>
<ol type="1">
<li>The model is relatively easy to use, even for programmers without experience with parallel and distributed systems since it handles parallelization, fault-tolerance, locality optimization, and load balancing.</li>
<li>A large variety of problems are easily expressible as MapReduce computations.</li>
<li>This paper developed an implementation of MapReduce that scales to large clusters of machines comprising thousands of machines.</li>
</ol>
</div>
</section>
<section id="the-genesis-of-hadoop-an-implementation-of-googles-ideas" class="slide level2 smaller">
<h2>The genesis of <em>Hadoop</em>: an implementation of Google’s ideas</h2>
<ul>
<li>Using the Google papers as a specification, they started implementing the ideas in Java in 2004 and created the <em>Nutch Distributed File System (NDFS)</em>.</li>
<li>The main purpose of this file system was to abstract the cluster’s storage so that it presents itself as a single, reliable, file system.</li>
<li>Another first class featuer of the system was its ability to handle failures without operator interventions and it can run on inexpensive, commodity hardware components</li>
<li>In 2006, Hadoop was created by moving NDFS (which becamie HDFS) and the MapReduce implementation out of Lucene. Hadoop 1.0 was released. 1.8TB of data sorts in 188 nodes in 48hours. Doug Cutting goes to work at Yahoo!</li>
<li>In 2007, LinkedIn, Twitter and Facebook started adopting this new tool and contributing back to the project. Yahoo! is running their first production Hadoop cluster with 1,000 machines.</li>
<li>In 2008, Yahoo! is running a 10,000 core cluster. World record created for fastest sorting of 1Tb in 209 seconds using a 910 node cluster. Cloudera is formed.</li>
<li>In 2009, Yahoo!’s cluster is 24,000 cores and claims to sort 1TB in 62 seconds. Amazon introduces Elastic MapReduce. HDFS and MapReduce become their own separate sub-projects.</li>
<li>In 2010, Yahoo!’s cluster is 4,000 and ~70PB, Facebook’s is 2,300 nodes and ~40PB.</li>
<li>In 2011, Yahoo!’s cluster is 42,000 nodes</li>
<li>In 2017, Twitter Hadoop cluster has over 500 Petabytes of data. Biggest cluster over 10k nodes. <a href="https://blog.twitter.com/engineering/en_us/topics/infrastructure/2017/the-infrastructure-behind-twitter-scale">Read more here</a></li>
</ul>
</section>
<section id="trivia-question-why-is-it-named-hadoop" class="slide level2">
<h2>Trivia question: why is it named Hadoop?</h2>
<div class="fragment">
<div class="column" style="width:47%;">
<p><img src="img/nyt-hadoop2.png"></p>
</div>
<div class="column" style="width:47%;">
<p><img src="img/apache-hadoop-logo.svg"></p>
</div>
</div>
</section>
<section id="tangent-why-open-source-matters" class="slide level2">
<h2>Tangent: Why Open Source Matters!</h2>
<p>The Google File System is not popular as a program among the business world… why???</p>
<p>Hadoop has become the standard for cluster storage because it is open source!!</p>
<p>Who has heard of Colossus? (Google’s next version of GFS)</p>
<p><a href="https://pierrezemb.fr/posts/colossus-google/">Review of GFS vs.&nbsp;Hadoop</a></p>
</section>
<section id="what-is-hadoop-1.0-mapreduce-engine-and-hdfs" class="slide level2">
<h2>What is Hadoop 1.0: MapReduce Engine and HDFS</h2>
<div class="column" style="width:47%;">
<h3 id="mapreduce-performs-the-computations-and-manages-cluster">MapReduce performs the computations and manages cluster</h3>
<ul>
<li>The <em>Job Tracker</em> is the master planner</li>
<li>The <em>Task Tracker</em> runs each task</li>
</ul>
<h3 id="hdfs-stores-the-data">HDFS stores the data</h3>
</div>
<div class="column" style="width:47%;">
<p><img src="img/michael-noll-hadoop-1-0.png"></p>
</div>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<h3 id="hadoop-1.0-problems">Hadoop 1.0 Problems</h3>
<ul>
<li>Monolithic</li>
<li>MapReduce had too many responsibilites</li>
<li>Assigning cluster resources</li>
<li>Managing job execution</li>
<li>Doing data processing</li>
<li>Interfacing with client applications</li>
<li>Only supported MapReduce</li>
<li>Had a single <em>NameNode</em> to manage the cluster (single point of failure)</li>
<li>Batch oriented and extremely inefficient with iterative queries</li>
</ul>
<p><img src="img/arch1-0.png"></p>
</div>
<div class="column" style="width:47%;">
<div class="fragment">
<!-- -->
<h3 id="yarn-hadoop-2.0">YARN &amp; Hadoop 2.0</h3>
<ul>
<li>Cluster management capability gets pulled out of MapReduce and becomes YARN (Yet Anothe Resource Negotiator), decoupling cluster operations from data pipeline</li>
<li>Allowed for other applications to run on a cluster</li>
<li>Hadoop 2.0 was released in 2013</li>
</ul>
<p><img src="img/arch2-0.png"></p>
</div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<h3 id="a-mapreduce-job-1.0">A MapReduce Job (1.0)</h3>
<p><img src="img/how-hadoop-runs-1-0.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="a-mapreduce-job-2.0">A MapReduce Job (2.0+)</h3>
<p><img src="img/hddg_0701.png"></p>
</div>
</section>
<section id="how-yarn-manages-the-cluster" class="slide level2">
<h2>How YARN manages the Cluster</h2>
<div class="imgcenter">
<p><img data-src="img/hddg_0402.png" width="550"></p>
</div>
</section>
<section id="the-hadoop-architecture-is-scalable" class="slide level2">
<h2>The Hadoop Architecture is Scalable</h2>
<div class="column" style="width:47%;">
<p><img src="img/dawh_0202.png"></p>
</div>
<div class="column" style="width:47%;">
<p><img src="img/hadoop-doesnt-care-about-data-size.png"></p>
</div>
</section>
<section id="hadoop-3.0-released-2017" class="slide level2">
<h2>Hadoop 3.0 (Released 2017)</h2>
<ul>
<li>Supports multiple standby NameNodes.</li>
<li>Supports multiple NameNodes for multiple namespaces.</li>
<li>Storage overhead reduced from 200% to 50%
<ul>
<li>Supports GPUs</li>
</ul></li>
<li>Supports for Microsoft Azure Data Lake and Aliyun Object Storage System file-system connectors</li>
<li>Rewrite of Hadoop Shell</li>
<li>MapReduce task Level Native Optimization.</li>
<li>Introduces more powerful YARN</li>
</ul>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<img data-src="img/hadoop-ecosystem.png" class="r-stretch">
<p>The Current Hadoop Ecosystem: <a href="https://hadoopecosystemtable.github.io/" class="uri">https://hadoopecosystemtable.github.io/</a></p>
</section></section>
<section>
<section id="lets-revisit-map-and-reduce-and-learn-more-about-mapreduce" class="title-slide slide level1 section center">
<h1>Let’s revisit Map and Reduce and learn more about MapReduce</h1>

</section>
<section id="map" class="slide level2">
<h2>Map</h2>
<div class="column" style="width:47%;">
<p><img src="img/dawh_0203.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="map-tasks-are-broken-into-the-following-phases">Map tasks are broken into the following phases:</h3>
<ul>
<li><strong>record reader:</strong> translates the <em>input split</em> generated by the <em>input format</em> into records or key/value pairs</li>
<li><strong>map:</strong> function that executes on every input record</li>
<li><strong>combiner:</strong> acts as a <em>localized</em> reducer to pre-aggregate within the map phase</li>
<li><strong>partitioner:</strong> takes intermediate key/value pairs from the mapper (or combiner if used) and splits them up into shards, one shard per reducer</li>
</ul>
</div>
</section>
<section id="reduce" class="slide level2">
<h2>Reduce</h2>
<div class="column" style="width:47%;">
<p><img src="img/dawh_0204.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="reduce-tasks-are-broken-into-the-following-phases">Reduce tasks are broken into the following phases:</h3>
<ul>
<li><strong>shuffle and sort:</strong> this phase takes the output files written by all of the partitioners and downloads the files to the local node where the <em>reducer</em> code will run</li>
<li><strong>reducer:</strong> function that executes on every group of records for the same key</li>
<li><strong>output format:</strong> translates the final key/value pair and writes out to a file by a record writer</li>
</ul>
</div>
</section>
<section id="combining-everything-into-mapreduce" class="slide level2">
<h2>Combining Everything into MapReduce</h2>
<div class="center">
<p><img src="img/dawh_0205.png"></p>
</div>
</section></section>
<section>
<section id="some-typical-mapreduce-patterns" class="title-slide slide level1 section center">
<h1>Some typical MapReduce patterns</h1>

</section>
<section id="map-only" class="slide level2">
<h2>Map Only</h2>
<div class="column" style="width:47%;">
<p><img src="img/hddg_0205.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="examples-of-map-only-jobs">Examples of map-only jobs:</h3>
<ul>
<li>Filtering</li>
<li>Data reorganization</li>
<li>Running a task in an embarrassingly parallel way</li>
</ul>
</div>
</section>
<section id="map-and-reduce" class="slide level2">
<h2>Map and Reduce</h2>
<div class="column" style="width:47%;">
<h3 id="single-reducer">Single reducer</h3>
<p><img src="img/hddg_0203.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="multiple-reducers">Multiple reducers</h3>
<p><img src="img/hddg_0204.png"></p>
</div>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<h3 id="benefits-of-hadoopmapreduce">Benefits of Hadoop/MapReduce</h3>
<ul>
<li><p>Fault tolerance</p></li>
<li><p>Map and Reduce functions are simple to understand and easy to program</p></li>
</ul>
</div>
<div class="column" style="width:47%;">
<h3 id="limitations-of-hadoopmapreduce">Limitations of Hadoop/MapReduce</h3>
<ul>
<li><p>Everything has to be expressed in a map or reduce, and sometimes you can’t</p></li>
<li><p>There is no control over the order in which map or reduce run</p></li>
<li><p>Data is not indexed</p></li>
<li><p>High overhead</p></li>
<li><p>You cannot leverage parallelism if you have an extremely large number of very small files (smaller than a single block)</p></li>
<li><p>Only suited for batch-processing, not real-time</p></li>
</ul>
</div>
</section></section>
<section>
<section id="working-with-your-data-in-a-cluster" class="title-slide slide level1 section center">
<h1>Working with your data in a cluster</h1>

</section>
<section id="everything-begins-and-ends-in-a-distributed-filesystem" class="slide level2">
<h2>Everything begins and ends in a distributed filesystem</h2>
<div class="center">
<p><img src="img/dawh_0208.png" width="850"></p>
</div>
</section>
<section id="distributed-filesystems" class="slide level2">
<h2>Distributed filesystems</h2>
<div class="center">
<p><img src="img/distributed-file-systems.png" width="850"></p>
</div>
</section>
<section id="cloud-object-storage-vs-hdfs" class="slide level2">
<h2>Cloud Object Storage vs HDFS</h2>
<ul>
<li><p>Independent scalability</p></li>
<li><p>Integration via simple REST API calls</p></li>
<li><p>Lower cost</p></li>
<li><p>No single point of failure</p></li>
</ul>
</section>
<section id="cloud-based-hadoop-clusters" class="slide level2">
<h2>Cloud based Hadoop Clusters</h2>
<p>Amazon Elastic MapReduce (EMR) and Azure HDInsight</p>
<div class="column" style="width:47%;">
<h3 id="on-premises">On Premises</h3>
<p><img src="img/dawh_0202.png"></p>
</div>
<div class="column" style="width:47%;">
<h3 id="cloud-based-note-the-storage-layer">Cloud Based (note the storage layer)</h3>
<p><img src="img/cloud-hadoop-arch.png"></p>
</div>
</section>
<section id="accessing-data-in-distributed-objectfile-system" class="slide level2">
<h2>Accessing Data in Distributed Object/File System</h2>
<h3 id="for-files-in-the-cluster-hdfs">For files in the <em>Cluster HDFS</em></h3>
<ul>
<li><code>directory/data/</code> which is a shortcut to</li>
<li><code>/user/hadoop/directory/data/</code></li>
</ul>
<h3 id="for-files-in-amazon-s3">For files in <em>Amazon S3</em></h3>
<p>The service name is <em>S3</em> and the data container is called a “bucket (<code>bucket_name</code>)” * <code>s3://bucket_name/directory/data/</code></p>
<h3 id="for-files-in-azure-blob">For Files in Azure Blob</h3>
<p>The service name is <em>Azure Storage Account</em> (<code>your_account</code>) and the data container is called a “container (<code>container</code>)”. There can be many containers in a storage account.</p>
<ul>
<li><code>wasb://container@your_account.blob.core.windows.net/directory/data/</code></li>
</ul>
</section>
<section id="hdfs-essential-commands" class="slide level2">
<h2>HDFS essential commands</h2>
<p>What commands have we discussed about the Linux file system that we want for HDFS?</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a href="#cb1-1"></a>#| code-line-numbers: false</span>
<span id="cb1-2"><a href="#cb1-2"></a># list files</span>
<span id="cb1-3"><a href="#cb1-3"></a>hdfs dfs -ls &lt;hdfs path&gt;</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a># make directories</span>
<span id="cb1-6"><a href="#cb1-6"></a>hdfs dfs -mkdir &lt;folder location&gt;</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a># touch an empty file</span>
<span id="cb1-9"><a href="#cb1-9"></a>hdfs dfs -touchz &lt;hdfs path&gt;</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a># "put" file to hdfs</span>
<span id="cb1-12"><a href="#cb1-12"></a>hdfs dfs -put &lt;other file path&gt; &lt;dest hdfs path&gt;</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a># "get" file from hdfs</span>
<span id="cb1-15"><a href="#cb1-15"></a>hdfs dfs -get &lt;other file path&gt; &lt;dest hdfs path&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="hdfs-essential-commands-1" class="slide level2">
<h2>HDFS essential commands</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb2-1"><a href="#cb2-1"></a># other flag commands, after command and subcommand</span>
<span id="cb2-2"><a href="#cb2-2"></a>hdfs dfs -cat &lt;hdfs path&gt; #print contents of file</span>
<span id="cb2-3"><a href="#cb2-3"></a>hdfs dfs -mv &lt;old hdfs path&gt; &lt;new hdfs path&gt; # move file/folder</span>
<span id="cb2-4"><a href="#cb2-4"></a>hdfs dfs -rm &lt;hdfs path&gt; #only one file</span>
<span id="cb2-5"><a href="#cb2-5"></a>hdfs dfs -rmr &lt;hdfs path&gt; # recursive flag!</span>
<span id="cb2-6"><a href="#cb2-6"></a>hdfs dfs -chmod 777 &lt;hdfs path&gt; # set permissions</span>
<span id="cb2-7"><a href="#cb2-7"></a>hdfs dfs -setfacl -m default:user:sqoop:rwx &lt;hdfs path&gt; # access control list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="https://www.geeksforgeeks.org/hdfs-commands/">Review common commands here</a><br>
<a href="https://mindmajix.com/hadoop-hdfs-commands-with-examples">More common commands</a></p>
</section>
<section id="how-to-programmatically-interact-with-hdfs-from-python" class="slide level2">
<h2>How to programmatically interact with HDFS from python?</h2>
<ul>
<li><p>Use a python library (hdfs, snakebite, pydoop)</p></li>
<li><p>What I do…</p></li>
<li><p>subprocess to call the real functions!</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource {{python}} number-lines code-with-copy"><code class="sourceCode"><span id="cb3-1"><a href="#cb3-1"></a></span>
<span id="cb3-2"><a href="#cb3-2"></a>import subprocess</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a># local path of the file</span>
<span id="cb3-5"><a href="#cb3-5"></a>local_path = '/home/hadoop/test_dir/myfile.txt'</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a># can be a new file name or a just folder destination</span>
<span id="cb3-8"><a href="#cb3-8"></a>hdfs_path = '/user/hadoop/data_folder/'</span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a># construct string command to execute in linux</span>
<span id="cb3-11"><a href="#cb3-11"></a>linux_command = f'hdfs dfs -put {local_path} {hdfs_path}'</span>
<span id="cb3-12"><a href="#cb3-12"></a></span>
<span id="cb3-13"><a href="#cb3-13"></a># run in linux, grab result code and message</span>
<span id="cb3-14"><a href="#cb3-14"></a>result_code, result_message = subprocess.getstatusoutput(linux_command)</span>
<span id="cb3-15"><a href="#cb3-15"></a></span>
<span id="cb3-16"><a href="#cb3-16"></a># raise an error if command did not exit properly</span>
<span id="cb3-17"><a href="#cb3-17"></a>if result_code != 0:</span>
<span id="cb3-18"><a href="#cb3-18"></a>  raise TypeError(f'exit code: {result_code}, {result_message}')</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="writing-mapreduce-applications" class="slide level2">
<h2>Writing MapReduce applications</h2>
<p>Hadoop is written in Java and provides a Java API that allows you to specify the following:</p>
<ul>
<li><p>The input and output data locations in your distributed object/file system</p></li>
<li><p>The Map and Reduce functions which are providede in the form of Java classes</p></li>
<li><p>Many kinds of job parameters and configurations</p></li>
</ul>
<p>Oh no! What if I want to use other programming languages?</p>
</section>
<section id="section-9" class="slide level2" data-background-image="img/java-logo.png" data-background-size="contain">
<h2></h2>

<img data-src="img/no-sign.png" style="width: 50%; margin: auto; display: block;" class="r-stretch"></section></section>
<section>
<section id="introducing-hadoop-streaming" class="title-slide slide level1 center" data-background-image="img/stream_1024.gif" data-background-size="cover">
<h1><span style="color: #ffffff;">Introducing Hadoop Streaming</span></h1>

<img data-src="img/3x.png" style="width: 50%; margin: auto; display: block;" class="r-stretch"></section>
<section id="the-name-hadoop-streaming-comes-from-the-unix-streams" class="slide level2">
<h2>The name <em>Hadoop Streaming</em> comes from the <em>Unix Streams</em></h2>

<img data-src="img/unix-streams.png" class="imgcenter r-stretch"></section>
<section id="hadoop-streaming-allows-you-to-run-any-executable-script-on-the-hadoop-framework" class="slide level2">
<h2>Hadoop Streaming allows you to run <em>any executable script</em> on the Hadoop Framework</h2>
<p>It uses an existing Java program to run non-java programs!</p>

<img data-src="img/dawh_0301.png" class="imgcenter r-stretch" width="700"><p>Keys and values can be single or compound</p>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<div class="column" style="width:47%;">
<h3 id="advantages-of-hadoop-streaming">Advantages of Hadoop Streaming</h3>
<ul>
<li><p>Using existing code-base (non Java)</p></li>
<li><p>Leveraging Hadoop framework to scale out</p></li>
</ul>
</div>
<div class="column" style="width:47%;">
<h3 id="limitations-of-hadoop-streaming">Limitations of Hadoop Streaming</h3>
<ul>
<li><p>No combiner or partitioner, just map -&gt; shuffle-sort -&gt; reduce</p></li>
<li><p>Everything is text. Your programs have to parse everything appropriately and convert strings to other data types as needed. You also have manually create the key/value pair for output.</p></li>
<li><p>If using R or Python, you must limit your programs to the base libraries.</p></li>
</ul>
</div>
</section>
<section id="basic-python-mapper" class="slide level2">
<h2>Basic Python Mapper</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource {{python}} number-lines code-with-copy"><code class="sourceCode"><span id="cb4-1"><a href="#cb4-1"></a>#!/usr/bin/env python</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>import sys</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>if __name__ == "__main__":</span>
<span id="cb4-6"><a href="#cb4-6"></a> for line in sys.stdin:</span>
<span id="cb4-7"><a href="#cb4-7"></a>     for word in line.split():</span>
<span id="cb4-8"><a href="#cb4-8"></a>         sys.stdout.write("{}\t1\n".format(word))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>The first line makes this an executable Python script</li>
<li>Read in line</li>
<li>Split line by space into single words</li>
<li>For every line: produce an output in the form of <code>word\t1</code> where <code>\t</code> is a tab</li>
<li>Output is always a key and value pair!</li>
</ul>
</section>
<section id="basic-python-reducer" class="slide level2">
<h2>Basic Python Reducer</h2>
<div class="columns">
<div class="column" style="width:47%;">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource {{python}} number-lines code-with-copy"><code class="sourceCode"><span id="cb5-1"><a href="#cb5-1"></a>#!/usr/bin/env python</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a>import sys</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>def stdout(key, val):</span>
<span id="cb5-6"><a href="#cb5-6"></a>  sys.stdout.write(f"{key}\t{val}\n")</span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a>if __name__ == '__main__':</span>
<span id="cb5-9"><a href="#cb5-9"></a> curkey = None</span>
<span id="cb5-10"><a href="#cb5-10"></a> total = 0</span>
<span id="cb5-11"><a href="#cb5-11"></a> for line in sys.stdin:</span>
<span id="cb5-12"><a href="#cb5-12"></a>     key, val = line.split("\t")</span>
<span id="cb5-13"><a href="#cb5-13"></a>     val = int(val)</span>
<span id="cb5-14"><a href="#cb5-14"></a></span>
<span id="cb5-15"><a href="#cb5-15"></a>     if key == curkey:</span>
<span id="cb5-16"><a href="#cb5-16"></a>         total += val</span>
<span id="cb5-17"><a href="#cb5-17"></a>     else:</span>
<span id="cb5-18"><a href="#cb5-18"></a>         if curkey is not None:</span>
<span id="cb5-19"><a href="#cb5-19"></a>              stdout(curkey, total)</span>
<span id="cb5-20"><a href="#cb5-20"></a></span>
<span id="cb5-21"><a href="#cb5-21"></a>         curkey = key</span>
<span id="cb5-22"><a href="#cb5-22"></a>         total = val</span>
<span id="cb5-23"><a href="#cb5-23"></a></span>
<span id="cb5-24"><a href="#cb5-24"></a> stdout(curkey, total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<ul>
<li>The first line makes this an executable Python script</li>
<li>Make stdout function</li>
<li>Read in line and stores in memory</li>
<li>Look at the key from the key/value</li>
<li>Read next line and compare key</li>
<li>Keep reading lines and storing lines in memory until the key is different</li>
<li>When new key is received, take all the lines from the previous key and do something and write out result</li>
<li>Repeat until all lines are processed</li>
</ul>
</div>
</div>
</section>
<section id="section-11" class="slide level2 smaller">
<h2></h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb6-1"><a href="#cb6-1"></a>hadoop jar /usr/lib/hadoop/hadoop-streaming.jar \</span>
<span id="cb6-2"><a href="#cb6-2"></a>-files basic-mapper.py,basic-reducer.py \</span>
<span id="cb6-3"><a href="#cb6-3"></a>-input [[input-location]] \</span>
<span id="cb6-4"><a href="#cb6-4"></a>-output [[output-location]] \</span>
<span id="cb6-5"><a href="#cb6-5"></a>-mapper basic-mapper.py \</span>
<span id="cb6-6"><a href="#cb6-6"></a>-reducer basic-reducer.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p><code>hadoop jar /usr/lib/hadoop/hadoop-streaming.jar</code> launches Hadoop with the <code>hadoop-streaming.jar</code></p></li>
<li><p><code>-files /home/hadoop/hadoop-streaming/basic-mapper.py,/home/hadoop/hadoop-streaming/basic-reducer.py</code> tells the job to “ship” the executable mapper and reducer scripts (the actual filename and absolute path) to every node on the cluster. <strong>This line must always be second when you need to ship files with your job.</strong></p></li>
<li><p><code>-input [[input-location]]</code> tells the Hadoop the location of your source data in a distributed object/filesystem. If you specify a directory, all files in the directory will be used as inputs</p></li>
<li><p><code>-output [[output-location]]</code> tells the Hadoop the location of your output data in a distributed object/filesystem. <strong>This parameter is just a name of a location, and it must not exist before running the job otherwise the job will fail.</strong></p></li>
<li><p><code>-mapper basic-mapper.py</code> and <code>reducer basic-reducer.py</code> specify the commands to run as a mapper and reducer, respectively. <strong>These must be shell scripts or native Linux commands.</strong> If you are using a script, you must “ship” it to the nodes with the <code>-files</code> parameter above.</p></li>
</ul>
</section>
<section id="gotchas" class="slide level2">
<h2>Gotcha’s</h2>
<ul>
<li><p>The output location of the job (HFDF, S3, Blob) must <em>not exist</em> before running a job. You will get an error if you try to write out to an existing/non-empty location</p></li>
<li><p>You have to <em>ship</em> or <em>package</em> your executables with the job.</p></li>
<li><p>Hadoop/Java error messages can be cryptic and only give you errors regarding the framework. If you need to debug your script you will need to look at the stdout/stderr logs</p></li>
<li><p>You need to specify the full path name of your mapper and reducer scripts</p></li>
</ul>
</section>
<section id="example-code" class="slide level2">
<h2>Example code</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource {{bash}} number-lines code-with-copy"><code class="sourceCode"><span id="cb7-1"><a href="#cb7-1"></a>hadoop jar /usr/lib/hadoop/hadoop-streaming.jar \</span>
<span id="cb7-2"><a href="#cb7-2"></a>-files basic-mapper.py,basic-reducer.py \</span>
<span id="cb7-3"><a href="#cb7-3"></a>-input /user/hadoop/in_data \</span>
<span id="cb7-4"><a href="#cb7-4"></a>-output /user/hadoop/in_data \</span>
<span id="cb7-5"><a href="#cb7-5"></a>-mapper basic-mapper.py \</span>
<span id="cb7-6"><a href="#cb7-6"></a>-reducer basic-reducer.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="hadoop-references" class="slide level2">
<h2>Hadoop References</h2>
<ul>
<li><p>Hadoop 3.3.1: <a href="https://hadoop.apache.org/docs/r3.3.1/" class="uri">https://hadoop.apache.org/docs/r3.3.1/</a></p>
<ul>
<li>HDFS Filesystem Commands: <a href="https://hadoop.apache.org/docs/r3.3.1/hadoop-project-dist/hadoop-common/FileSystemShell.html" class="uri">https://hadoop.apache.org/docs/r3.3.1/hadoop-project-dist/hadoop-common/FileSystemShell.html</a></li>
</ul></li>
<li><p>Hadoop Streaming <a href="https://hadoop.apache.org/docs/r3.3.1/hadoop-streaming/HadoopStreaming.html" class="uri">https://hadoop.apache.org/docs/r3.3.1/hadoop-streaming/HadoopStreaming.html</a></p></li>
</ul>
</section></section>
<section id="cluster-demo-if-there-is-time" class="title-slide slide level1 center">
<h1>Cluster Demo (if there is time)</h1>
>>>>>>> 5cfd7cc16e257c0a05ca9589ee545fcbfa2d7d0d

<div class="footer footer-default">

</div>
<<<<<<< HEAD
</section></section>
=======
</section>
>>>>>>> 5cfd7cc16e257c0a05ca9589ee545fcbfa2d7d0d
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'print',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>